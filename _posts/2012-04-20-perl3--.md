---
layout: post
title: "Perl学习笔记(3) － 子程序、输入输出、哈希"
category: 
tags: [Perl]
---
{% include JB/setup %}
好久没认真学perl了，这两周事情太多，在这里快快总结下，做个回顾。

###Chap4 子程序
(1) 子程序就是函数，引用时前面加&表示(在确定语境下编译器能够确定这是一个子程序时，可以省略&号，但是子程序如果和perl内置函数重名时必须配合&使用；参数的括号也是可以省略的)。子程序无需事先声明，其定义是全局的。

(2) 子程序的定义：
	参数传入的时候放在参数列表@_中，也可以用$_[0],$_[1]⋯⋯来访问这些传入的参数。

	@_是子程序的私有变量，如果已经有全局变量@_，那么该变量在子程序调用前会先被存起来，在子程序返回时恢复原来的值。也就是说，子程序可以将参数传给其他的程序，而不用担心遗失自己的@_变量。即使是子程序递归调用自己，每次调用时仍会取得一个新的@_。

	默认情况下，perl中所有的变量都是全局变量，所以子程序中的变量也是全局变量。如果要定义子程序的私有变量，用my表示，这时候这些变量的作用域就被圈定在语句块中。
	
	sub max{
		my ($m, $n) = @_;
		if ($m > $n){
			$m
		}
		else{
			$n
		}


(3) 关于return：子程序是可以不写return语句的，这时最后一次运算的结果会被当成子程序的返回值。而在写return语句的时候，可以把return省略，就象上面一段代码$m就代表将$m作为返回值。

(4) perl允许省略语句块最后一个分号，所以$m后面没有加分号。但是一般只有代码简单到整个语句块只有一行时，才有必要省略分号。

(5) perl的列表长度是不做限制的，如果传入的参数了，那么参数列表中多余的参数就会被自动忽略。

	我们可以用标量上下文中数组的使用来检查参数的个数，但是其实一般这是不会被用到的，我们希望我们的子程序能够适应任意数目的参数：

	sub max{
		if (@_ !=2) {
			print "We need only two arguements!";
		}
	}

(6) state是用来定义持久私有变量的，这样我们可以在子程序中多次调用间保留变量的值，并将变量的作用域限在子程序中。在第一次调用子程序时，state表达式会被执行一次，接下来的调用会被perl忽略。另外不能在列表上下文中初始化数组和哈希类型的state变量。	
